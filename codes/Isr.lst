   1              	gcc2_compiled.:
   2              	___gnu_compiled_cplusplus
   3              		stabs "/home/elex8030/jseo/tec/",100,0,0,Ltext0
   4              		stabs "Isr.cc",100,0,0,Ltext0
   5              	
   6              		section	.text
   7              	
   8              	Ltext0	stabs "int:t1=r1;-32768;32767;",128,0,0,0
   9              		stabs "char:t2=r2;0;255;",128,0,0,0
  10              		stabs "long int:t3=r1;0020000000000;0017777777777;",128,0,0,0
  11              		stabs "unsigned int:t4=r4;0;65535;",128,0,0,0
  12              		stabs "long unsigned int:t5=r1;0000000000000;0037777777777;",128,0,0,0
  13              		stabs "long long int:t6=r1;0020000000000;0017777777777;",128,0,0,0
  14              		stabs "long long unsigned int:t7=r1;0000000000000;0037777777777;",128,0,0,0
  15              		stabs "short int:t8=r8;-32768;32767;",128,0,0,0
  16              		stabs "short unsigned int:t9=r9;0;65535;",128,0,0,0
  17              		stabs "signed char:t10=r10;-128;127;",128,0,0,0
  18              		stabs "unsigned char:t11=r11;0;255;",128,0,0,0
  19              		stabs "float:t12=r1;4;0;",128,0,0,0
  20              		stabs "double:t13=r1;4;0;",128,0,0,0
  21              		stabs "long double:t14=r1;4;0;",128,0,0,0
  22              		stabs "complex int:t15=s4real:1,0,16;imag:1,16,16;;",128,0,0,0
  23              		stabs "complex float:t16=r16;4;0;",128,0,0,0
  24              		stabs "complex double:t17=r17;4;0;",128,0,0,0
  25              		stabs "complex long double:t18=r18;4;0;",128,0,0,0
  26              		stabs "bool:t19=@s8;-16;",128,0,0,0
  27              		stabs "void:t20=20",128,0,0,0
  28              		stabs "__wchar_t:t21=r21;-32768;32767;",128,0,0,0
  29              		stabs "__vtbl_ptr_type:t22=*23=f1",128,0,0,0
  30              		stabs "size_t:t4",128,0,5,0
  31              		stabs "uint16:t4",128,0,6,0
  32              		stabs "ulong32:t5",128,0,7,0
  33              		stabs "ptrdiff_t:t1",128,0,8,0
  34              		stabs "Isr:T24=s6ictlr:/025=&26=xsIctlr:,0,16;index:/04,16,16;\\",128,0,0,0
  35              		stabs "$vf24:27=*28=ar0;0;3;22,32;__as::29=##30=&24;:RC3Isr;2A.;Isr::31=##32=*24;:RC3Isr;2A.;\\",1
  36              		stabs "handler::33=##20;:;0A*2;24;;Isr::34=##32;:R5IctlrUi;1A.35=#24,20,32,1,20;:_$_3Isr;1A*3;24;;
  37              		stabs "Isr:Tt24",128,0,19,0
  38              		stabs "Ictlr:Tt26=s6length:/04,0,16;isrTable:/036=*32,16,16;\\",128,0,0,0
  39              		stabs "$vf26:37=*38=ar0;0;2;22,32;__as::39=##25;:RC5Ictlr;2A.;Ictlr::40=##41=*26;:RC5Ictlr;2A.;\\"
  40              		stabs "runHandler::42=##20;:Ui;1A.;Ictlr::43=##41;:Ui;2A.44=#26,20,41,1,20;:_$_5Ictlr;2A*2;26;;\\"
  41              		stabs "attach::45=##20;:P3Isr;2A.;detach::45:P3Isr;2A.;;~%26;",128,0,41,0
  42              		stabs "IoMask:t1",128,0,39,0
  43              		stabs "pwmreg:Tt46=u2byte:47=ar0;0;1;2,0,16;word:4,0,16;\\",128,0,0,0
  44              		stabs "__as::48=##49=&46;:RC6pwmreg;2A.;pwmreg::50=##51=*46;:RC6pwmreg;2A.52=##51;:;2A.;;",128,0,4
  45              		stabs "sciport:Tt53=s8scbd:1,0,16;sccr1:2,16,8;\\",128,0,0,0
  46              		stabs "loops:/21:loops;woms:/21:woms;rsrc:/21:rsrc;\\",128,0,0,0
  47              		stabs "m:/21:m;wake:/21:wake;ilt:/21:ilt;\\",128,0,0,0
  48              		stabs "pe:/21:pe;pt:/21:pt;sccr2:2,24,8;\\",128,0,0,0
  49              		stabs "tie:/21:tie;tcie:/21:tcie;rie:/21:rie;\\",128,0,0,0
  50              		stabs "ilie:/21:ilie;te:/21:te;re:/21:re;\\",128,0,0,0
  51              		stabs "rwu:/21:rwu;sbk:/21:sbk;scsr1:2,32,8;\\",128,0,0,0
  52              		stabs "tdre:/21:tdre;tc:/21:tc;rdrf:/21:rdrf;\\",128,0,0,0
  53              		stabs "idle:/21:idle;or:/21:or;nf:/21:nf;\\",128,0,0,0
  54              		stabs "fe:/21:fe;pf:/21:pf;scsr2:2,40,8;\\",128,0,0,0
  55              		stabs "raf:/21:raf;scdrh:2,48,8;r8:/21:r8;\\",128,0,0,0
  56              		stabs "t8:/21:t8;scdrl:2,56,8;__as::54=##55=&53;:RC7sciport;2A.;\\",128,0,0,0
  57              		stabs "sciport::56=##57=*53;:RC7sciport;2A.58=##57;:;2A.;;",128,0,637,0
  58              		stabs "spiport:Tt59=s6spcr1:2,0,8;spie:/21:spie;\\",128,0,0,0
  59              		stabs "spe:/21:spe;swom:/21:swom;mstr:/21:mstr;\\",128,0,0,0
  60              		stabs "cpol:/21:cpol;cpha:/21:cpha;ssoe:/21:ssoe;\\",128,0,0,0
  61              		stabs "lsbf:/21:lsbf;spcr2:2,8,8;pups:/21:pups;\\",128,0,0,0
  62              		stabs "rds:/21:rds;spc0:/21:spc0;spbr:2,16,8;\\",128,0,0,0
  63              		stabs "spr31:/21:spr31;spr62:/21:spr62;spr125:/21:spr125;\\",128,0,0,0
  64              		stabs "spr250:/21:spr250;spr500:/21:spr500;\\",128,0,0,0
  65              		stabs "spr1000:/21:spr1000;spr2000:/21:spr2000;\\",128,0,0,0
  66              		stabs "spr4000:/21:spr4000;spsr:2,24,8;spif:/21:spif;\\",128,0,0,0
  67              		stabs "wcol:/21:wcol;modf:/21:modf;rsvd4:2,32,8;\\",128,0,0,0
  68              		stabs "spdr:2,40,8;__as::60=##61=&59;:RC7spiport;2A.;spiport::62=##63=*59;:RC7spiport;2A.\\",128,0
  69              		stabs "64=##63;:;2A.;;",128,0,690,0
  70              	
  71              		global	___3IsrR5IctlrUi
  72              	___3IsrR5IctlrUi
   1:Isr.cc        **** //lab6
   2:Isr.cc        **** //Jin Won Seo
   3:Isr.cc        **** 
   4:Isr.cc        **** #include "Isr.h"
   5:Isr.cc        **** #include "chipio.h"
   6:Isr.cc        **** 
   7:Isr.cc        **** //Isr constructor
   8:Isr.cc        **** Isr::Isr(Ictlr& ic, uint16 i)
   9:Isr.cc        **** :ictlr(ic), index(i)
  73              		stabd 68,0,9
  74 0000 1B9C     		leas	-4,s
  75              	
  76 0002 6C82     		std	2,s
  77 0004 CC0006   		ldd	#___vt_3Isr
  78 0007 ED82     		ldy	2,s
  79 0009 6C44     		std	4,y
  80 000b ED86     		ldy	6,s
  81 000d 6DF30002 		sty	[2,s]
  82 0011 EC88     		ldd	8,s
  83 0013 ED82     		ldy	2,s
  84 0015 6C42     		std	2,y
  10:Isr.cc        **** {
  85              		stabd 68,0,10
  86              	
  11:Isr.cc        **** 	ictlr.attach(this);
  87              	LBB2	stabd 68,0,11
  88 0017 EEF30002 		ldx	[2,s]
  89 001b 6D80     		sty	0,s
  90 001d B754     		tfr	x,d
  91 001f 1600BC   		jsr	_attach__5IctlrP3Isr
  92              	
  93 0022 EC82     	LBE2	ldd	2,s
  12:Isr.cc        **** //	ddrdlc |= (1 << 5);		// DEBUG
  13:Isr.cc        **** }
  94              		stabd 68,0,13
  95              	
  96 0024 1B84     		leas	4,s
  97 0026 3D       		rts
  98              	
  99              		stabs "__3IsrR5IctlrUi:F32",36,0,9,___3IsrR5IctlrUi
 100              		stabs "this:p32",160,0,9,2
 101              		stabs "ic:p25",160,0,9,6
 102              		stabs "i:p4",160,0,9,8
 103              		stabn 192,0,0,LBB2
 104              		stabn 224,0,0,LBE2
 105              	
 106              	Lscope0	stabs "",36,0,0,Lscope0-___3IsrR5IctlrUi
 107              	
 108              		global	__$_3Isr
 109              	__$_3Isr
  14:Isr.cc        **** 
  15:Isr.cc        **** //Isr de-constructor
  16:Isr.cc        **** Isr::~Isr()
  17:Isr.cc        **** {
 110              		stabd 68,0,17
 111 0027 1B9C     		leas	-4,s
 112              	
 113 0029 6C82     		std	2,s
 114 002b CC0006   		ldd	#___vt_3Isr
 115 002e ED82     		ldy	2,s
 116 0030 6C44     		std	4,y
 117              	
  18:Isr.cc        **** 	ictlr.detach(this);
 118              	LBB3	stabd 68,0,18
 119 0032 EEF30002 		ldx	[2,s]
 120 0036 6D80     		sty	0,s
 121 0038 B754     		tfr	x,d
 122 003a 1600D6   		jsr	_detach__5IctlrP3Isr
 123              	
 124 003d EC86     	LBE3	ldd	6,s
 125 003f 87       		clra	
 126 0040 C401     		andb	#1      & $FF
 127 0042 B745     		tfr	d,x
 128 0044 8E0000   		tstx	
 129 0047 2705     		beq	L26
 130              		
 131 0049 EC82     		ldd	2,s
 132 004b 160000   		jsr	___builtin_delete
 133              	
  19:Isr.cc        **** }
 134              	L26	stabd 68,0,19
 135              	
 136 004e 1B84     		leas	4,s
 137 0050 3D       		rts
 138              	
 139              		stabs "_$_3Isr:F20",36,0,17,__$_3Isr
 140              		stabs "this:p32",160,0,17,2
 141              		stabs "__in_chrg:p1",160,0,17,6
 142              		stabn 192,0,0,LBB3
 143              		stabn 224,0,0,LBE3
 144              	
 145              	Lscope1	stabs "",36,0,0,Lscope1-__$_3Isr
 146              	
 147              		global	___5IctlrUi
 148              	___5IctlrUi
  20:Isr.cc        **** 
  21:Isr.cc        **** //Ictlr constructor
  22:Isr.cc        **** Ictlr::Ictlr(uint16 len)
  23:Isr.cc        **** :length(len), isrTable(new Isr*[length])
 149              		stabd 68,0,23
 150 0051 1B9C     		leas	-4,s
 151              	
 152 0053 6C82     		std	2,s
 153 0055 EE86     		ldx	6,s
 154 0057 CC0000   		ldd	#___vt_5Ictlr
 155 005a ED82     		ldy	2,s
 156 005c 6C44     		std	4,y
 157 005e 6EF30002 		stx	[2,s]
 158 0062 B754     		tfr	x,d
 159 0064 59       		asld	
 160 0065 B745     		tfr	d,x
 161 0067 160000   		jsr	___builtin_vec_new
 162 006a B745     		tfr	d,x
 163 006c ED82     		ldy	2,s
 164 006e 6E42     		stx	2,y
  24:Isr.cc        **** {
 165              		stabd 68,0,24
 166              	
  25:Isr.cc        **** 	for(size_t i =0; i<length; i++)
 167              	LBB4	stabd 68,0,25
 168              	
 169 0070 87C7     	LBB5	clrd	
 170 0072 2015     		bra	L34
 171              		
 172              	
  26:Isr.cc        **** 	{
  27:Isr.cc        **** 		isrTable[i] = 0;
 173              	L31	stabd 68,0,27
 174 0074 EC80     		ldd	0,s
 175 0076 59       		asld	
 176 0077 B745     		tfr	d,x
 177 0079 ED82     		ldy	2,s
 178 007b EC42     		ldd	2,y
 179 007d 1AE6     		leax	d,x
 180 007f 18000000 		movw	#0,0,x
 180      00
  28:Isr.cc        **** 	}
 181              		stabd 68,0,28
 182 0084 EC80     		ldd	0,s
 183 0086 C30001   		addd	#1
 184              	
 185 0089 6C80     	L34	std	0,s
 186 008b ACF30002 		cpd	[2,s]
 187 008f 25E3     		blo	L31
 188              		
 189              	
 190              	LBE5
 191 0091 EC82     	LBE4	ldd	2,s
  29:Isr.cc        **** //	ddrdlc |= (1 << 5);		// DEBUG
  30:Isr.cc        **** }
 192              		stabd 68,0,30
 193              	
 194 0093 1B84     		leas	4,s
 195 0095 3D       		rts
 196              	
 197              		stabs "__5IctlrUi:F41",36,0,23,___5IctlrUi
 198              		stabs "this:p41",160,0,23,2
 199              		stabs "len:p4",160,0,23,6
 200              		stabs "len:r4",64,0,23,2
 201              		stabn 192,0,0,LBB4
 202              		stabs "i:r65=*4",64,0,25,3
 203              		stabn 192,0,0,LBB5
 204              		stabn 224,0,0,LBE5
 205              		stabn 224,0,0,LBE4
 206              	
 207              	Lscope2	stabs "",36,0,0,Lscope2-___5IctlrUi
 208              	
 209              		global	__$_5Ictlr
 210              	__$_5Ictlr
  31:Isr.cc        **** 
  32:Isr.cc        **** //Ictlr de-constructor
  33:Isr.cc        **** Ictlr::~Ictlr()
  34:Isr.cc        **** {
 211              		stabd 68,0,34
 212 0096 1B9E     		leas	-2,s
 213              	
 214 0098 6C80     		std	0,s
 215 009a CC0000   		ldd	#___vt_5Ictlr
 216 009d ED80     		ldy	0,s
 217 009f 6C44     		std	4,y
 218              	
  35:Isr.cc        **** 	delete[] isrTable;
 219              	LBB6	stabd 68,0,35
 220 00a1 EE42     		ldx	2,y
 221 00a3 2705     		beq	L38
 222              		
 223 00a5 B754     		tfr	x,d
 224 00a7 160000   		jsr	___builtin_vec_delete
 225              	
 226              	LBE6
 227 00aa EC84     	L38	ldd	4,s
 228 00ac 87       		clra	
 229 00ad C401     		andb	#1      & $FF
 230 00af 8C0000   		tstd	
 231 00b2 2705     		beq	L40
 232              		
 233 00b4 EC80     		ldd	0,s
 234 00b6 160000   		jsr	___builtin_delete
 235              	
  36:Isr.cc        **** }
 236              	L40	stabd 68,0,36
 237              	
 238 00b9 1B82     		leas	2,s
 239 00bb 3D       		rts
 240              	
 241              		stabs "_$_5Ictlr:F20",36,0,34,__$_5Ictlr
 242              		stabs "this:p41",160,0,34,0
 243              		stabs "__in_chrg:p1",160,0,34,4
 244              		stabn 192,0,0,LBB6
 245              		stabn 224,0,0,LBE6
 246              	
 247              	Lscope3	stabs "",36,0,0,Lscope3-__$_5Ictlr
 248              	
 249              		global	_attach__5IctlrP3Isr
 250              	_attach__5IctlrP3Isr
  37:Isr.cc        **** //add Isr to the table
  38:Isr.cc        **** void Ictlr::attach(Isr* isr)
  39:Isr.cc        **** {
 251              		stabd 68,0,39
 252 00bc 1B9E     		leas	-2,s
 253              	
 254 00be 6C80     		std	0,s
 255 00c0 EE84     		ldx	4,s
 256              	
  40:Isr.cc        **** 	if(isr->index < length)
 257              	LBB7	stabd 68,0,40
 258 00c2 EC02     		ldd	2,x
 259 00c4 ACF30000 		cpd	[0,s]
 260 00c8 2409     		bhs	L42
 261              		
  41:Isr.cc        **** 		isrTable[isr->index] = isr;
 262              		stabd 68,0,41
 263 00ca 59       		asld	
 264 00cb ED80     		ldy	0,s
 265 00cd E342     		addd	2,y
 266 00cf B746     		tfr	d,y
 267 00d1 6E40     		stx	0,y
 268              	
 269              	L42
  42:Isr.cc        **** 	//else is not necessary
  43:Isr.cc        **** }
 270              	LBE7	stabd 68,0,43
 271              	
 272 00d3 1B82     		leas	2,s
 273 00d5 3D       		rts
 274              	
 275              		stabs "attach__5IctlrP3Isr:F20",36,0,39,_attach__5IctlrP3Isr
 276              		stabs "this:p41",160,0,39,0
 277              		stabs "isr:p32",160,0,39,4
 278              		stabs "isr:r32",64,0,39,2
 279              		stabn 192,0,0,LBB7
 280              		stabn 224,0,0,LBE7
 281              	
 282              	Lscope4	stabs "",36,0,0,Lscope4-_attach__5IctlrP3Isr
 283              	
 284              		global	_detach__5IctlrP3Isr
 285              	_detach__5IctlrP3Isr
  44:Isr.cc        **** //remove Isr from the table
  45:Isr.cc        **** void Ictlr::detach(Isr* isr)
  46:Isr.cc        **** {
 286              		stabd 68,0,46
 287 00d6 1B9E     		leas	-2,s
 288              	
 289 00d8 B745     		tfr	d,x
 290 00da ED84     		ldy	4,s
 291              	
  47:Isr.cc        **** 	if(isr->index < length)
 292              	LBB8	stabd 68,0,47
 293 00dc ED42     		ldy	2,y
 294 00de 6D80     		sty	0,s
 295 00e0 AD00     		cpy	0,x
 296 00e2 240C     		bhs	L44
 297              		
  48:Isr.cc        **** 		isrTable[isr->index]=0;
 298              		stabd 68,0,48
 299 00e4 B764     		tfr	y,d
 300 00e6 59       		asld	
 301 00e7 E302     		addd	2,x
 302 00e9 B745     		tfr	d,x
 303 00eb 18000000 		movw	#0,0,x
 303      00
 304              	
 305              	L44
  49:Isr.cc        **** }
 306              	LBE8	stabd 68,0,49
 307              	
 308 00f0 1B82     		leas	2,s
 309 00f2 3D       		rts
 310              	
 311              		stabs "detach__5IctlrP3Isr:F20",36,0,46,_detach__5IctlrP3Isr
 312              		stabs "this:P41",64,0,46,2
 313              		stabs "isr:p32",160,0,46,4
 314              		stabs "isr:r32",64,0,46,1
 315              		stabn 192,0,0,LBB8
 316              		stabn 224,0,0,LBE8
 317              	
 318              	Lscope5	stabs "",36,0,0,Lscope5-_detach__5IctlrP3Isr
 319              	
 320              		global	___vt_5Ictlr
 321              	
 322              		section	.const
 323              		stabs "__vt_5Ictlr:G38",32,0,41,0
 324              	___vt_5Ictlr
 325 0000 0000     		dc.w	0
 326 0002 0000     		dc.w	0
 327 0004 0096     		dc.w	__$_5Ictlr
 328              	
 329              		global	___vt_3Isr
 330              		stabs "__vt_3Isr:G28",32,0,19,0
 331              	___vt_3Isr
 332 0006 0000     		dc.w	0
 333 0008 0000     		dc.w	0
 334 000a 0000     		dc.w	___pure_virtual
 335 000c 0027     		dc.w	__$_3Isr
 336              	
 337              		section	.text
 338              	
 339              		global	_runHandler__5IctlrUi
 340              	_runHandler__5IctlrUi
 341              		stabs "Isr.h",132,0,0,Ltext1
 342              	
   1:Isr.h         **** //lab6
   2:Isr.h         **** //Jin Won Seo
   3:Isr.h         **** #ifndef ISR_H
   4:Isr.h         **** #define ISR_H
   5:Isr.h         **** 
   6:Isr.h         **** #include "stddef.h"
   7:Isr.h         **** 
   8:Isr.h         **** class Isr
   9:Isr.h         **** {
  10:Isr.h         **** 	//compiler expects a class declaration
  11:Isr.h         **** 	class Ictlr& ictlr;//controller that is attached to
  12:Isr.h         **** 	uint16 index;//index in my controller's table
  13:Isr.h         **** 	friend class Ictlr;
  14:Isr.h         **** 	virtual void handler()=0;//pure virtual
  15:Isr.h         **** 	
  16:Isr.h         **** 	protected:
  17:Isr.h         **** 	Isr(Ictlr&, uint16 index);
  18:Isr.h         **** 	virtual ~Isr();
  19:Isr.h         **** };
  20:Isr.h         **** 
  21:Isr.h         **** class Ictlr
  22:Isr.h         **** {
  23:Isr.h         **** 	uint16 length;//# of entries in table
  24:Isr.h         **** 	Isr** isrTable;
  25:Isr.h         **** 
  26:Isr.h         **** 	protected:
  27:Isr.h         **** 	void runHandler(uint16 index)
  28:Isr.h         **** 	{
 343              	Ltext1	stabd 68,0,28
 344              	
 345 00f3 B745     		tfr	d,x
 346              	
  29:Isr.h         **** 		if(isrTable[index])
 347              	LBB9	stabd 68,0,29
 348 00f5 EC82     		ldd	2,s
 349 00f7 59       		asld	
 350 00f8 E302     		addd	2,x
 351 00fa B746     		tfr	d,y
 352 00fc EC40     		ldd	0,y
 353 00fe 270A     		beq	L4
 354              		
  30:Isr.h         **** 			isrTable[index]->handler();
 355              		stabd 68,0,30
 356 0100 B746     		tfr	d,y
 357 0102 EE44     		ldx	4,y
 358 0104 15E30004 		jsr	[4,x]
 359 0108 2002     		bra	L8
 360              		
  31:Isr.h         **** 		else
  32:Isr.h         **** 			while(1);//do something about "wild" interrupt
 361              		stabd 68,0,32
 362              	
 363 010a 20FE     	L4	bra	L4
 364              		
 365              	
 366              	LBE9
  33:Isr.h         **** 	}
 367              	L8	stabd 68,0,33
 368              	
 369 010c 3D       		rts
 370              	
 371              		stabs "runHandler__5IctlrUi:F20",36,0,28,_runHandler__5IctlrUi
 372              		stabs "this:P41",64,0,28,2
 373              		stabs "index:p4",160,0,28,2
 374              		stabn 192,0,0,LBB9
 375              		stabn 224,0,0,LBE9
 376              	
 377              	Lscope6	stabs "",36,0,0,Lscope6-_runHandler__5IctlrUi
 378              	
 379              	
 380              		end
